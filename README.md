Mostly code from [Go Concurrency Patterns: Pipelines and cancellation](https://blog.golang.org/pipelines).
